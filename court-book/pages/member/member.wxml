<view class="container">
  <view class="user-info">
    <view class="avatar-placeholder">乐动网球</view>
    <view class="info">
      <text class="nickname">{{phoneNumber?'微信用户':'' || '未登录'}}</text>
      <text class="member-level" wx:if="{{userInfo.memberLevel}}">{{userInfo.memberLevel}}级会员</text>
    </view>
   
    <button class="login-btn" wx:if="{{!phoneNumber}}" open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">登录/注册</button>
  </view>

  <view class="member-card">
    <view class="card-title">会员卡信息</view>
    <view class="card-content" wx:if="{{loading}}">
      <view class="loading-text">加载中...</view>
    </view>
    <view class="card-content" wx:elif="{{memberInfo}}">
      <view class="card-item">
        <text class="label">姓名</text>
        <text class="value">{{memberInfo.name || '未设置'}}</text>
      </view>
      <view class="card-item">
        <text class="label">手机号</text>
        <text class="value">{{maskedPhoneNumber || '未绑定'}}</text>
      </view>
      <view class="card-item" wx:if="{{memberInfo.court}}">
        <text class="label">所属场地</text>
        <text class="value">{{memberInfo.court}}</text>
      </view>
      <view class="card-item" wx:if="{{memberInfo.rest_charge !== undefined}}">
        <text class="label">余额</text>
        <text class="value">¥{{memberInfo.rest_charge}}</text>
      </view>
      <view class="card-item" wx:if="{{memberInfo.times_count !== undefined}}">
        <text class="label">次卡次数</text>
        <text class="value">{{memberInfo.times_count}}次</text>
      </view>
      <view class="card-item" wx:if="{{memberInfo.annual_count !== undefined}}">
        <text class="label">年卡次数</text>
        <text class="value">{{memberInfo.annual_count}}次</text>
      </view>
    </view>
    <view class="card-content" wx:else>
      <view class="card-item">
        <text class="label">会员卡号</text>
        <text class="value">{{maskedPhoneNumber || '未绑定'}}</text>
      </view>
      <view class="card-item">
        <text class="label">会员信息</text>
        <text class="value">普通用户</text>
      </view>
    </view>
  </view>

  <view class="menu-list">
    <view class="menu-item" bindtap="navigateToMyBookings">
      <text>我的预约</text>
      <text class="arrow">></text>
    </view>
    <view class="menu-item" wx:if="{{memberInfo}}" bindtap="navigateToChargedList">
      <text>充值记录</text>
      <text class="arrow">></text>
    </view>
    <view class="menu-item" wx:if="{{memberInfo}}" bindtap="navigateToSpendList">
      <text>消费记录</text>
      <text class="arrow">></text>
    </view>
    <!-- <view class="menu-item" bindtap="navigateToPoints">
      <text>积分记录</text>
    </view>
    <view class="menu-item" bindtap="navigateToSettings">
      <text>设置</text>
    </view>
    <view class="menu-item">
      <button bindtap="showAddCourtModal">添加场地</button>
    </view>
     -->
  </view>

  <modal
    title="添加场地"
    hidden="{{!showAddCourtModal}}"
    bind:cancel="handleModalCancel"
    bind:confirm="handleModalConfirm"
    show-cancel="true"
    confirm-text="提交"
    cancel-text="取消"
    >
    <view class="modal-content">
      <input placeholder="请输入校区" value="{{campus}}" bindinput="onCampusInput" />
      <input placeholder="请输入场地编号" value="{{courtNumber}}" bindinput="onCourtNumberInput" type="number" />
    </view>
  </modal>
</view> 